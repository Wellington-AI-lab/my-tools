# æ¯æ—¥æ—©æŠ¥é‚®ä»¶æ¨é€ - éƒ¨ç½²æŒ‡å—

## åŠŸèƒ½æ¦‚è¿°

æ¯å¤©æ—©ä¸Š 8:00 (åŒ—äº¬æ—¶é—´) è‡ªåŠ¨å‘é€é«˜ä»·å€¼ç§‘æŠ€æ–°é—»æ‘˜è¦é‚®ä»¶ã€‚

## æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `src/email-digest.ts` | é‚®ä»¶æ¨é€ Worker æ ¸å¿ƒé€»è¾‘ |
| `wrangler.toml` | æ·»åŠ äº† Cron Trigger é…ç½® |

## éƒ¨ç½²æ­¥éª¤

### 1. æ³¨å†Œ Resend è·å– API Key

è®¿é—® https://resend.com/signup æ³¨å†Œè´¦å·ï¼Œè·å– API Keyã€‚

### 2. é…ç½®åŸŸå (å¯é€‰)

Resend å…è´¹ç‰ˆéœ€è¦éªŒè¯å‘ä»¶åŸŸåï¼š
1. åœ¨ Resend æ·»åŠ ä½ çš„åŸŸå
2. æ·»åŠ  DNS è®°å½•éªŒè¯
3. éªŒè¯é€šè¿‡åå¯ä½¿ç”¨è¯¥åŸŸåå‘é‚®ä»¶

### 3. è®¾ç½®ç¯å¢ƒå˜é‡

```bash
cd workers/news-api

# è®¾ç½® Resend API Key
npx wrangler secret put RESEND_API_KEY
# è¾“å…¥ä½ çš„ re_xxx å¯†é’¥

# è®¾ç½®å‘ä»¶äººé‚®ç®± (éœ€è¦éªŒè¯è¿‡çš„åŸŸå)
npx wrangler secret put DIGEST_FROM
# è¾“å…¥: Vibe Digest <noreply@yourdomain.com>

# è®¾ç½®è®¢é˜…è€…é‚®ç®± (å¤šä¸ªç”¨é€—å·åˆ†éš”)
npx wrangler secret put DIGEST_TO
# è¾“å…¥: user@example.com,another@example.com
```

### 4. éƒ¨ç½² Worker

```bash
npx wrangler deploy
```

### 5. æ‰‹åŠ¨æµ‹è¯•

```bash
# è·å–æµ‹è¯• key (RESEND_API_KEY çš„å‰ 16 ä½)
# ç„¶åè®¿é—®:
curl https://news-api.zhusen-wang.workers.dev/digest \
  -H "Authorization: Bearer <TEST_KEY>"
```

## Cron æ—¶é—´è¯´æ˜

| Cron è¡¨è¾¾å¼ | UTC æ—¶é—´ | åŒ—äº¬æ—¶é—´ | è¯´æ˜ |
|-------------|----------|----------|------|
| `0 0 * * *` | 00:00 | 08:00 | æ¯å¤©æ—©ä¸Š 8 ç‚¹ |
| `0 16 * * *` | 16:00 | 00:00 | æ¯å¤©åˆå¤œ |
| `0 4 * * *` | 04:00 | 12:00 | æ¯å¤©ä¸­åˆ |

## é‚®ä»¶æ¨¡æ¿é¢„è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         âš¡ Vibe æ—©æŠ¥                 â”‚
â”‚      2025å¹´12æœˆ29æ—¥ æ˜ŸæœŸæ—¥           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  #1  ğŸ”¥ 9    V2EX                  â”‚
â”‚  OpenAI å‘å¸ƒæœ€æ–°æ¨¡å‹...             â”‚
â”‚  è¯¥æ¨¡å‹åœ¨æ¨ç†èƒ½åŠ›ä¸Šæœ‰é‡å¤§çªç ´...    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  #2  âš¡ 7    Hacker News           â”‚
â”‚  Linux å†…æ ¸æ›´æ–°...                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ... æ›´å¤š ...                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è´¹ç”¨è¯´æ˜

- **Cloudflare Workers**: å…è´¹å¥—é¤ 100k requests/day
- **Resend**: å…è´¹å¥—é¤ 3,000 emails/month
- **D1 æ•°æ®åº“**: å…è´¹å¥—é¤ 5GB å­˜å‚¨

å®Œå…¨å…è´¹å³å¯è¿è¡Œï¼
