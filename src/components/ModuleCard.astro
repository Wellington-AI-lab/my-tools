---
import type { ModuleDef } from '@/config/modules';

const { module } = Astro.props as { module: ModuleDef };
const isAdmin = locals.user?.role === 'admin';

// 如果是管理员专用模块但用户不是管理员，不渲染
if (module.adminOnly && !isAdmin) {
  // 返回空注释或占位符
  return '';
}
---

<a href={module.href} class="block glass-effect rounded-xl p-5 card-hover">
  <div class="flex items-start justify-between gap-3">
    <div>
      <div class="flex items-center gap-2">
        <h3 class="text-lg font-bold text-onekey-text-primary">{module.name}</h3>
        {module.status && (
          <span
            class:list={[
              'text-xs px-2 py-0.5 rounded-full border',
              module.status === 'stable'
                ? 'bg-green-100 text-green-700 border-green-300'
                : module.status === 'beta'
                ? 'bg-red-100 text-red-700 border-red-300'
                : 'bg-onekey-dark-tertiary text-onekey-text-secondary border-black/10',
            ]}
          >
            {module.status}
          </span>
        )}
      </div>
      {module.description && (
        <p class="mt-2 text-sm text-onekey-text-secondary leading-relaxed">
          {module.description}
        </p>
      )}
    </div>
    <div class="shrink-0 text-onekey-accent-green font-bold">→</div>
  </div>
</a>


